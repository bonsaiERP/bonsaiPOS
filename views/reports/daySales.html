<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<title>BonsaiPOS</title>
<script>
  window.$ = window.jQuery = require('../../libs/jquery.min.js');
</script>
<script src="../../models/nameoffice.js" type="text/javascript"></script>
<script src="../../models/database/database.js" type="text/javascript"></script>
<script src = "../../models/reports/daySales.js" type="text/javascript"></script>
<script src="../../models/cashier/cashier.js" type="text/javascript"></script>
<script src="../../node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
<link href="../../node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
<script type="text/javascript">
function verify_cashier(){
  if(exist_active_cashier('\\views\\reports',2)){
     document.getElementById("cash_close").style.display = "block"
     document.getElementById("cash_open").style.display = "none"
  }else{
     document.getElementById("cash_close").style.display = "none"
     document.getElementById("cash_open").style.display = "block"
  }
}
</script>
</head>

<body onload="verify_cashier()">

  <nav class="navbar navbar-default">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="../../index.html">BonsaiPOS</a>
      </div>

      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"> Productos <span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li><a href="../products/stock.html">Stock</a></li>
            </ul>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"> Venta <span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li><a href="../sales/newSale.html">Nueva Venta</a></li>
            </ul>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"> Reportes <span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li><a href="daySales.html">Ventas del dia</a></li>
            </ul>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" id="cash_open" data-toggle="dropdown" role="button" aria-expanded="false">Caja<span class="caret"></span></a>
             <ul class="dropdown-menu" role="menu">
               <li><a href="../cashier/opencashier.html">Abrir Caja</a></li>
             </ul>
          </li>

          <li class="dropdown">
           <a href="#" class="dropdown-toggle" id="cash_close" data-toggle="dropdown" role="button" aria-expanded="false">Caja<span class="caret"></span></a>
             <ul class="dropdown-menu" role="menu">
              <li><a href="../cashier/closecashier.html">Cerrar Caja</a></li>
            </ul>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"> Sicronizar <span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li><a href="#" id="update">Sincronizar Productos </a></li>
              <li><a href="#" id="download"></a></li>
            </ul>
          </li>

          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"> Cliente <span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li><a href="../users/newUser.html">Nuevo cliente</a></li>
              <li><a href="../users/listusers.html">Lista clientes</a></li>
            </ul>
          </li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li><a href="#"><span class="glyphicon glyphicon-user" aria-hidden="true"></span> Usuario</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li><a href="../connectionERP/new.html"><span class="glyphicon glyphicon-user" aria-hidden="true"></span>
          <script>document.write(get_data_nameoffice('\\views\\reports',2));</script></a></li>
        </ul>
      </div>
    </div>
  </nav>
  <div class="container">
    <div id="progressbardiv" class="progress progress-striped active" hidden="true">
      <div id="progressbar-2" class="progress-bar" style="transition-duration: 1s; -webkit-transition-duration: 1s; width: 45%">Cargando...</div>
    </div>
    <div class="alert alert-dismissible alert-success" id="alertMessage" hidden="true">
      <button type="button" class="close" data-dismiss="alert">×</button>
    </div>
  </div>


  <h1 align="center">Ventas del día</h1><br/>
  <div class="container">
    <center>
      <p id="labeldate"><script>
      var data_table = $("#labeldate");
      data_table.append('Fecha: '+ getactualdate(new Date()));
      </script></p>
    </center><br>
    <table class="table table-striped table-hover" id="tblDatos">
      <tr>
        <th style="text-align: center;">Hora</th>
        <th style="text-align: center;">Numero de Venta</th>
        <th style="text-align: center;">Cliente</th>
        <th style="text-align: center;">Total Venta</th>
      </tr>
      <script>
         var list_of_sales = returnlistofsalesofdate(new Date());
         list_of_sales = orderlistbyhour(list_of_sales);
         var data_table = $("#tblDatos");
         for (var cont = 0; cont < list_of_sales.length; cont++) {
           var aux = convertdatetoformatofso(list_of_sales[cont].date);
           data_table.append('<tr> <td style="text-align: center;">' + getactualtime(aux) + '</td> <td style="text-align: center;">' + list_of_sales[cont].id + '</td> <td style="text-align: center;">' + list_of_sales[cont].client + '</td> <td style="text-align: center;">' + list_of_sales[cont].total + '</td> </tr>');
         }
         data_table.append('<tr><td></td><td style="text-align: right;"><strong>Total acomulado:</strong></td><td style="text-align: center;">'+gettotalofsales(list_of_sales)+'</td>');
      </script>
    </table>

  </div>
</body>
</html>
